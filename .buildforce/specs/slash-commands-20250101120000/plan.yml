id: slash-commands-20250101120000-plan
name: "Implementation Plan for Slash Commands"
spec_id: "slash-commands-20250101120000"
type: implementation-plan
status: in-progress
created: "2025-01-15"
last_updated: "2025-01-15"

# ARCHITECTURE OVERVIEW

approach: |
  Implement 5 slash commands as markdown instruction templates for Claude Code.
  Each command is a structured prompt that enhances user queries with workflow context.
  Commands follow the sequence: RESEARCH � SPEC � PLAN � BUILD � COMPLETE.

  The project context repository (.buildforce/context/) serves as the foundation,
  providing accumulated knowledge that RESEARCH leverages as its primary source.

technology_stack:
  - Markdown files with YAML frontmatter (Claude Code compatible)
  - YAML for context repository structure
  - Mermaid for architecture diagrams

# DESIGN DECISIONS

decisions:
  - decision: "Use markdown files for commands, not code"
    rationale: "Commands are instruction templates, not executable code. Markdown keeps them simple, readable, and Claude Code compatible."

  - decision: "Make commands compact (~20-40 lines)"
    rationale: "Build agents already know HOW to work. Commands only need to add workflow-specific context, not teach fundamentals."

  - decision: "Context repository as primary knowledge source"
    rationale: "Eliminates redundant codebase exploration by leveraging accumulated knowledge from past sessions. Major time saver."

  - decision: "RESEARCH command has 7 key guidelines"
    rationale: "Covers all critical aspects: project context search, recency awareness, structured output, file paths, diagrams, data models, next steps."

  - decision: "Structured YAML for context files"
    rationale: "YAML is human-readable and searchable. Enables _index.yml to act as efficient discovery mechanism."

  - decision: "Deviation logging in BUILD command"
    rationale: "Tracks when implementation diverges from plan (e.g., library swaps). Provides transparency and audit trail."

  - decision: "Explicit confirmation at key stages"
    rationale: "Prevents premature progression. User must approve spec, plan, and completion explicitly."

# FILE STRUCTURE

files_to_create:
  commands:
    - src/templates/commands/research.md
    - src/templates/commands/spec.md
    - src/templates/commands/plan.md
    - src/templates/commands/build.md
    - src/templates/commands/complete.md

  context_repository:
    - .buildforce/context/_index.yml
    - .buildforce/context/_schema.yml
    - .buildforce/context/_graph.mmd
    - .buildforce/context/slash-commands.yml
    - .buildforce/context/research-slash-command.yml

  specs:
    - .buildforce/specs/001-slash-commands/spec.yml
    - .buildforce/specs/001-slash-commands/plan.yml

# IMPLEMENTATION PLAN

phase_1:
  name: "Create Initial Command Files"
  status: " COMPLETE"
  tasks:
    - task: "Create src/templates/commands/ directory structure"
      status: " complete"

    - task: "Create research.md with initial content"
      status: " complete"
      notes: "Started with basic structure"

    - task: "Create spec.md with initial content"
      status: " complete"
      notes: "Full specification materialization workflow"

    - task: "Create plan.md with initial content"
      status: " complete"
      notes: "Design decision framework and implementation steps"

    - task: "Create build.md with initial content"
      status: " complete"
      notes: "Progress tracking and deviation logging"

    - task: "Create complete.md with initial content"
      status: " complete"
      notes: "Final validation and confirmation"

  completion_date: "2025-01-15"

phase_2:
  name: "Review and Iterate Each Command"
  status: "= IN PROGRESS (1/5 complete)"
  description: |
    Iterate on each command until it captures 100% of the current manual workflow.
    Focus on making commands compact but powerful.
    Remove HOW instructions; keep WHAT enhancements.

  tasks:
    - task: "Iterate on RESEARCH command"
      status: " complete"
      iterations:
        - iteration: 1
          changes: "Simplified from 87 lines to 28 lines"
          rationale: "Removed verbose HOW-TO instructions; kept essential guidelines"

        - iteration: 2
          changes: "Added 3 codebase-specific guidelines: file paths, architecture diagrams, data models"
          rationale: "Ensures concrete, reusable artifacts for subsequent commands"

        - iteration: 3
          changes: "Added Project Context Search as guideline #1 (ALWAYS start here)"
          rationale: "Positions .buildforce/context/_index.yml as primary knowledge sourcethe masterpiece innovation"

      final_line_count: 28
      completion_date: "2025-01-15"

    - task: "Iterate on SPEC command"
      status: "� pending"
      notes: "Will iterate after testing RESEARCH"

    - task: "Iterate on PLAN command"
      status: "� pending"
      notes: "Will iterate after SPEC is complete"

    - task: "Iterate on BUILD command"
      status: "� pending"
      notes: "Will iterate after PLAN is complete"

    - task: "Iterate on COMPLETE command"
      status: "� pending"
      notes: "Will iterate after BUILD is complete"

  estimated_completion: "TBD (depends on manual testing feedback)"

phase_3:
  name: "Manual Testing via .claude/commands"
  status: "� NOT STARTED"
  description: |
    Test each command by pasting it into .claude/commands/ and using it in real sessions.
    Validate that commands guide build agents correctly without over-instructing.
    Confirm structured outputs are useful for subsequent workflow steps.

  tasks:
    - task: "Test RESEARCH command"
      status: "� pending"
      test_scenarios:
        - "Codebase query: 'How is authentication implemented?'"
        - "Recency query: 'Current best practices for OAuth 2.0 with Cognito'"
        - "Mixed query: 'Compare our auth implementation with latest OAuth standards'"
      validation:
        - "Searches _index.yml first"
        - "Produces file path list"
        - "Generates Mermaid diagram"
        - "Documents data models"
        - "Suggests next step (/spec)"

    - task: "Test SPEC command"
      status: "� pending"
      test_scenarios:
        - "Clear intent: 'Add password reset feature'"
        - "Vague intent: 'Improve authentication'"
      validation:
        - "Asks clarifying questions for vague intent"
        - "Generates complete spec with all sections"
        - "Validates testability of requirements"
        - "Suggests /plan after approval"

    - task: "Test PLAN command"
      status: "� pending"
      test_scenarios:
        - "Plan with no constraints"
        - "Plan with specific library preference"
      validation:
        - "Requires prior /spec command"
        - "Justifies all design decisions"
        - "References specific file paths"
        - "Validates alignment with spec"

    - task: "Test BUILD command"
      status: "� pending"
      test_scenarios:
        - "Initial build from approved plan"
        - "Iteration with user feedback (e.g., 'change library X to Y')"
      validation:
        - "Shows progress checklist"
        - "Logs deviations with rationale"
        - "Requests confirmation (not auto-complete)"

    - task: "Test COMPLETE command"
      status: "� pending"
      validation:
        - "Validates all spec requirements"
        - "Reviews deviation log"
        - "Generates completion report"
        - "Requires explicit user confirmation"

  estimated_completion: "TBD"

# CONTEXT REPOSITORY SETUP

context_setup:
  status: " COMPLETE"

  tasks:
    - task: "Create .buildforce/context/ directory structure"
      status: " complete"

    - task: "Create _index.yml with initial entries"
      status: " complete"
      entries:
        - "slash-commands (type: module)"
        - "research-slash-command (type: feature)"

    - task: "Create _schema.yml with guidelines"
      status: " complete"
      notes: "Extracted from authentication.yml example"

    - task: "Create _graph.mmd with architecture diagram"
      status: " complete"
      notes: "Shows CLI, Core Modules, Template System, Context Repository, Slash Commands, AI Integration"

    - task: "Create slash-commands.yml (module-level context)"
      status: " complete"
      notes: "Overview of 5-command workflow system"

    - task: "Create research-slash-command.yml (feature-level context)"
      status: " complete"
      notes: "Detailed documentation of RESEARCH command"

  completion_date: "2025-01-15"

# PROGRESS SUMMARY

overall_progress:
  phase_1: " 100% complete (5/5 commands created)"
  phase_2: "= 20% complete (1/5 commands iterated: RESEARCH)"
  phase_3: "� 0% complete (0/5 commands tested)"

current_status: |
  Phase 1 is completeall 5 command files exist with initial content.
  Phase 2 is in progressRESEARCH command has been iterated to 100% flow capture.
  Remaining commands (SPEC, PLAN, BUILD, COMPLETE) need iteration based on manual testing feedback.
  Phase 3 will begin once at least RESEARCH testing is complete.

next_immediate_steps:
  - "Test RESEARCH command manually via .claude/commands"
  - "Gather feedback on RESEARCH command effectiveness"
  - "Iterate on SPEC command based on RESEARCH testing insights"
  - "Continue iterative testing and refinement for remaining commands"

# RISKS & CONSIDERATIONS

risks:
  - risk: "Commands may be too compact and miss critical workflow details"
    mitigation: "Manual testing will reveal gaps; iterate based on real usage"

  - risk: "Build agents may ignore guidelines if not emphasized properly"
    mitigation: "Use bold text, ALWAYS/NEVER keywords, numbered priorities"

  - risk: "Context repository may not be searched consistently"
    mitigation: "Make Project Context Search guideline #1 with ALWAYS emphasis"

  - risk: "Deviation logging may be overlooked during BUILD"
    mitigation: "Explicitly instruct to maintain running deviation log throughout"

# VALIDATION CRITERIA

success_metrics:
  - "Each command reduces manual workflow time by at least 50%"
  - "RESEARCH eliminates need for manual @ file references"
  - "SPEC captures intent without premature HOW decisions"
  - "PLAN justifies all design decisions with clear rationale"
  - "BUILD tracks progress visibly and logs all deviations"
  - "COMPLETE validates 100% of spec requirements"
  - "User can run full workflow (RESEARCH � COMPLETE) without confusion"

# NOTES

lessons_learned:
  - "Compactness is keybuild agents don't need HOW instructions"
  - "Explicit guidelines (numbered, bold) are more effective than prose"
  - "Project context repository is a game-changer for research efficiency"
  - "Iteration based on manual testing is essentialfirst draft is never perfect"

future_enhancements:
  - "Automatic context file generation from completed /complete sessions"
  - "CLI command to validate context repository integrity"
  - "Analytics on which context files are most frequently accessed"
  - "Integration with CI/CD to auto-generate context on merge"
